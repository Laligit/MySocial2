<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Creative Feed</title>
    <!-- Use Tailwind CSS for a clean, modern look -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Montserrat:wght@700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            /* A subtle gradient for the background */
            background: linear-gradient(to bottom right, #e0f2fe, #f0f9ff);
            background-attachment: fixed;
        }

        /* Styling for the post feed content */
        .post-container img, .post-container video {
            max-width: 100%;
            height: auto;
            border-radius: 0.75rem;
            object-fit: cover;
        }

        /* Custom style for the post button hover effect */
        .post-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1), 0 6px 6px rgba(0,0,0,0.1);
        }

        /* New styles for the horizontal media gallery */
        .media-gallery {
            display: flex;
            overflow-x: scroll; /* Enables horizontal scrolling */
            -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
            scroll-snap-type: x mandatory; /* Snaps to each item */
            gap: 1rem;
            padding-bottom: 1rem;
        }

        .media-item {
            flex-shrink: 0;
            scroll-snap-align: start;
            width: 100%; /* Each item takes up the full width of the container */
        }
    </style>
</head>
<body class="bg-blue-50 flex justify-center p-4 min-h-screen">
    <div class="max-w-xl w-full">
        <!-- Header Section -->
        <header class="text-center py-8">
            <h1 class="text-4xl font-bold text-gray-800 tracking-wide" style="font-family: 'Montserrat', sans-serif;">MY FEED</h1>
            <p class="text-lg text-gray-600 mt-2">Share your world with friends!</p>
        </header>

        <!-- Post Creation Section -->
        <div class="bg-white p-6 rounded-3xl shadow-2xl mb-6 transform transition duration-500 hover:scale-105">
            <h2 class="text-xl font-semibold mb-4 text-gray-700">Create a new post</h2>
            
            <!-- Message box for user feedback (instead of alert) -->
            <div id="messageBox" class="hidden bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative mb-4">
                <span id="messageText"></span>
            </div>
            
            <!-- Text input -->
            <textarea id="postText" placeholder="What's on your mind?" class="w-full h-24 p-4 rounded-xl border-2 border-gray-200 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500 mb-4 text-gray-800 transition duration-300 ease-in-out resize-none"></textarea>
            
            <!-- File input for images and videos, now with the 'multiple' attribute -->
            <label for="postFile" class="block text-gray-600 font-medium mb-2">Upload pictures or videos</label>
            <input type="file" id="postFile" accept="image/*,video/*" multiple class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 cursor-pointer mb-4">

            <!-- Post button with a subtle hover effect -->
            <button id="postButton" class="w-full bg-blue-600 text-white font-bold py-3 rounded-xl shadow-lg hover:bg-blue-700 transition duration-300 ease-in-out post-button">
                Post
            </button>
        </div>

        <!-- Content Feed Section -->
        <div id="contentFeed" class="space-y-6">
            <!-- Posts will be dynamically added here by JavaScript -->
        </div>
    </div>

    <script>
        // Get references to the HTML elements
        const postButton = document.getElementById('postButton');
        const postText = document.getElementById('postText');
        const postFile = document.getElementById('postFile');
        const contentFeed = document.getElementById('contentFeed');
        const messageBox = document.getElementById('messageBox');
        const messageText = document.getElementById('messageText');

        // Function to show a message box instead of an alert
        function showMessage(message) {
            messageText.textContent = message;
            messageBox.classList.remove('hidden');
            setTimeout(() => {
                messageBox.classList.add('hidden');
            }, 3000); // Hide the message after 3 seconds
        }

        // Add an event listener to the post button
        postButton.addEventListener('click', () => {
            const text = postText.value.trim();
            const files = postFile.files;
            
            // Check if there is any content to post
            if (text === '' && files.length === 0) {
                showMessage('Please enter some text or select a file to post.');
                return;
            }

            // Create a new post element
            const postElement = document.createElement('div');
            postElement.className = 'post-container bg-white p-6 rounded-xl shadow-lg border-b border-gray-200 animate-fade-in relative';

            // Add text content if it exists
            if (text !== '') {
                const textParagraph = document.createElement('p');
                textParagraph.className = 'text-gray-800 text-lg mb-4';
                textParagraph.textContent = text;
                postElement.appendChild(textParagraph);
            }

            // Create and append the delete button
            const deleteButton = document.createElement('button');
            deleteButton.className = 'absolute top-2 right-2 p-2 rounded-full bg-gray-200 hover:bg-gray-300 text-gray-600 transition duration-300';
            deleteButton.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>';
            deleteButton.addEventListener('click', () => {
                postElement.remove();
            });
            postElement.appendChild(deleteButton);
            
            // Handle file content (image or video)
            if (files.length > 0) {
                // Create a media gallery container
                const mediaGallery = document.createElement('div');
                mediaGallery.className = 'media-gallery mb-4';
                postElement.appendChild(mediaGallery);

                // Use a counter to track when all files have been processed
                let filesProcessed = 0;
                const totalFiles = files.length;
                
                // Loop through all selected files
                for (let i = 0; i < files.length; i++) {
                    const file = files[i];
                    const reader = new FileReader();

                    reader.onload = (e) => {
                        const fileUrl = e.target.result;

                        if (file.type.startsWith('image/')) {
                            // Create and append an image element inside a media-item div
                            const mediaItem = document.createElement('div');
                            mediaItem.className = 'media-item';
                            const imageElement = document.createElement('img');
                            imageElement.src = fileUrl;
                            imageElement.alt = 'Posted image';
                            imageElement.className = 'w-full rounded-lg shadow-md';
                            mediaItem.appendChild(imageElement);
                            mediaGallery.appendChild(mediaItem);
                        } else if (file.type.startsWith('video/')) {
                            // Create and append a video element inside a media-item div
                            const mediaItem = document.createElement('div');
                            mediaItem.className = 'media-item';
                            const videoElement = document.createElement('video');
                            videoElement.src = fileUrl;
                            videoElement.controls = true; // Add playback controls
                            videoElement.className = 'w-full rounded-lg shadow-md';
                            mediaItem.appendChild(videoElement);
                            mediaGallery.appendChild(mediaItem);
                        }

                        // Check if all files have been processed before adding the post to the feed
                        filesProcessed++;
                        if (filesProcessed === totalFiles) {
                            // Insert the new post at the top of the feed
                            contentFeed.prepend(postElement);

                            // Clear the inputs after posting
                            postText.value = '';
                            postFile.value = '';
                        }
                    };

                    // Read the file as a data URL
                    reader.readAsDataURL(file);
                }
            } else {
                // If only text was posted, insert the new post at the top of the feed
                contentFeed.prepend(postElement);

                // Clear the text input
                postText.value = '';
            }
        });
    </script>
</body>
</html>
